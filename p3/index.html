<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />
  <link rel="shortcut icon" type="image/x-icon" href="/dwd/favicon.png">
  <link rel="icon" type="image/x-icon" href="/dwd/favicon.png">
  <title>
  Project3 - A Total Control Lighting Helper
  </title>

  <script src="../jquery-1.8.1.js" type="text/javascript"></script>
  <script src="../jquery-ui-1.8.23.custom/js/jquery-ui-1.8.23.custom.min.js"></script>

  <link rel="Stylesheet" type="text/css" href="../jpicker/css/jpicker-1.1.6.min.css" />
  <link rel="Stylesheet" type="text/css" href="../jpicker/jPicker.css" />
  <script src="../jpicker/jpicker-1.1.6.js" type="text/javascript"></script>


  <link rel="Stylesheet" type="text/css" href="tcl_helper.css" />
  <script src="tcl_helper.js" type="text/javascript"></script>

  <script type="text/javascript">

    var $diagram;

    function change_color(led, color)
    {
      var context = led.find("canvas")[0].getContext("2d");
      context.fillStyle = color;
      context.fill();
    }

    function init() 
    {
      // initialize the diagram
      $diagram = new diagram("diagram1");
      $diagram.initialize(5);

      // initialize color picker
      $('span.pot').jPicker(
        {
          window:
          {
            expandable: true
          },
          images: {
            clientPath: '../jPicker/images/'
          }
        },
        // commit callback
        function(color, context)
          {
            var all = color.val('all');
            //alert('Color chosen - hex: ' + (all && '#' + all.hex || 'none') + ' - alpha: ' + (all && all.a + '%' || 'none'));
            $("#" + this.parentNode.id).css(
              {
                backgroundColor: all && '#' + all.hex || 'transparent'
              }); // prevent IE from throwing exception if hex is empty
          }
        );

        // make palette pots draggable
        $("div.pot").draggable( {
          revert: false,
          helper: function() { return $("<span class='color_drag'>Drop me</span>")[0]; }
        } );

        // make the leds droppable
        $("div.led").droppable ({ 
            drop: function(event, ui) {
            $foo = ui.draggable;
              //change_color($(this), ui.draggable[0].style.backgroundColor);
              change_color($(this), ui.draggable.css("background-color"));
            }
          });

    }

    $(document).ready(function()
    {
      init ();
    });

  </script>

</head>
<body>

  <div id="diagram1" class="diagram" width="600px" height="400px">
    <canvas class="diagram1_canvas" width="600px" height="400px"></canvas>
  </div>

  <div id="palette1" class="palette">
    <div id="pot1" class="pot" title="Drag to Color an LED">
      <span id="pot1_picker" class="pot"></span>
    </div>
    <div id="pot2" class="pot" title="Drag to Color an LED">
      <span id="pot2_picker" class="pot"></span>
    </div>
  </div>


</body>
</html>
